<!-- 用于注册的界面 -->

<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">

    <title>Bootstrap Admin Template </title>
    <link rel="shortcut icon" href="/static/img/favicon.ico">
    
    <!-- global stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/css/font-icon-style.css">
    <link rel="stylesheet" href="/static/css/style.default.css" id="theme-stylesheet">

    <!-- Core stylesheets -->
    <link rel="stylesheet" href="/static/css/pages/login.css">
</head>

<body> 

<!--====================================================
                        PAGE CONTENT
======================================================--> 
      <section class="hero-area">
        <div class="overlay"></div>
        <div class="container">
          <div class="row">
			<div class="col-sm-2 col-lg-2 col-md-2"></div>
            <div class="col-sm-6 col-md-8 col-lg-7">
							<div class="contact-h-cont">
                <!-- <div style="background: #FFFFFF; padding: 10px; border-radius: 5px;"> -->
                  <!-- <h3 class="text-center"><img src="/static/img/logo.png" class="img-fluid" alt=""></h3><br> -->
                  <form method='post'  class="form-horizontal" action="/regist/" onsubmit="return checkall()">
									{% csrf_token %}
									<!-- {% if message %}
                    <div class="alert alert-warning" id="message">{{ message }}</div>
									{% endif %} -->
										<div class="alert alert-warning message_hidden"  id="message"></div>
										 <div id="show1"  >
											<div class="form-group">
												<label for="username" class="control-label">用户名
												</label>
												<input type="text" class="form-control" name='username' id="username" placeholder="请输入用户名">
											</div>
											<div class="form-group">
												<label for="exampleInputEmail1" >密码
												</label>
												<input class="form-control" type="password" name='password' id="upassword" placeholder="请输入密码">
											</div>
											<div class="form-group">
												<label for="exampleInputEmail1">确认密码
												</label>
												<input class="form-control" name='enpassword' type="password" id="enupassword" placeholder="确认密码">
											</div>
											<div class="form-check">
												<label class=" mb-2 mr-sm-2 mb-sm-0">
														<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
												</label>
											</div>
											<div style="line-height: 5px; margin: 0px;">
												&nbsp;
											</div>
											<button class="btn col-md-12 btn-blue" id="next1" role="button"  type="button"  >
												<i fa fa-right-arrow></i>下一步
											</button>
										</div>
										<div id="show2" class="message_hidden" >
											<label for="unamech" class="diy_front">中文名</label>
											<div class="row">
												<div class="form-group col-md-6">
													<input type="text" name='ufnamech' class="form-control" id="ufnamech" placeholder="您的姓氏">
												</div>
												<div class="form-group col-md-6" >
													<input type="text" name='ulnamech' class="form-control" id="ulnamech" placeholder="您的名字（不包括姓氏）">
												</div>
											</div>
											<label for="unamech" class="diy_front">English name（英文名）</label>
											<div class="row">
												<div class="form-group col-md-6">
													<input type="text" class="form-control" id="ufnameen" name='ufnameen' placeholder="First name">
												</div>
												<div class="form-group col-md-6" >
													<input type="text" class="form-control" id="ulnameen" name='ulnameen' placeholder="Last name">
												</div>
											</div>
											<div class="form-check">
												<label class=" mb-2 mr-sm-2 mb-sm-0">
														<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
												</label>
											</div>
											<div style="line-height: 5px; margin: 0px;">
												&nbsp;
											</div>
											<div class="col-md-12 text-center">
												<button class="btn col-md-5 btn-blue" id="previous1" role="button"  type="button"  >
													<i fa fa-right-arrow></i>上一步
												</button>
												<span class="col-md-1"></span>
												<button class="btn col-md-5 btn-blue" id="next2" role="button"  type="button"  >
														<i fa fa-right-arrow></i>下一步
												</button>
											</div>
										</div>
										<div id="show3" class="message_hidden" >
												<div class="form-group">
														<label for="mail">邮箱
														</label>
														<input type="text" name='umail' class="form-control" id="umail" placeholder="请输入邮箱">
														<ul id="show_mail" class="list"></ul>
												</div>
												<div class="form-group">
													<label for="phone">手机
													</label>
													<input onKeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))" type="number" name='uphone' class="form-control" id="uphone" placeholder="请输入手机号">
												</div>
												<div class="form-group">
													<label for="qq">QQ
													</label>
													<input name='uqq' id="uqq" onKeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))" type="number" class="form-control"  placeholder="请输入qq号">
												</div>
												<div class="form-check">
													<label class=" mb-2 mr-sm-2 mb-sm-0">
														<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
													</label>
												</div>
												<div class="col-md-12 text-center">
												<button class="btn  btn-blue col-md-5" id="previous2" role="button" type="button" >
													<i fa fa-right-arrow></i>上一步
												</button>
												<span class="col-md-1"></span>
												<button class="btn btn-blue col-md-5" id="sub" role="button" type="submit" >
													<i fa fa-right-arrow></i>提&nbsp;&nbsp;&nbsp;&nbsp;交
												</button>
												</div>
											</div>
										</div>
										<!-- <div id="show3">
											<div class="form-group">
												<label for="unamech">作者信息：</label>
											</div>
											<div class="form-group">
												<label for="unamech">中文名
												</label>
												<input type="text" name='unamech' class="form-control" id="unamech" placeholder="中文名">
											</div>
											<div class="form-group">
												<label for="unameen">英文名
												</label>
												<input type="text" class="form-control" id="unameen" name='unameen' placeholder="英文名">
											</div>
											<div class="form-check">
												<label class=" mb-2 mr-sm-2 mb-sm-0">
													<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
												</label>
											</div>
											<div style="line-height: 5px; margin: 0px;">
												&nbsp;
											</div>
											<div class="col-md-12 text-center">
											<button class="btn  btn-blue col-md-5" id="previous2" role="button" type="button" onclick="change(this.id)">
												<i fa fa-right-arrow></i>上一步
											</button>
											<span class="col-md-1"></span>
											<button class="btn btn-blue col-md-5" id="next3" role="button" type="button" disabled onclick="change(this.id)">
												<i fa fa-right-arrow></i>下一步
											</button>
											</div>
										</div> -->
										<!-- <div id="show4">
											<div class="form-group">
												<label for="unamech">作者单位信息：</label>
											</div>
											<div class="form-group">
												<input type="text" name='cnamech1' class="form-control" id="cnamech1" placeholder="一级单位中文名">
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="cnameeg1" name='cnameeg1' placeholder="一级单位英文名">
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="cnamech2" name='cnamech2' placeholder="二级单位中文名">
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="cnameeg2" name='cnameeg2' placeholder="二级单位英文名">
											</div>

											<div class="form-check">
												<label class=" mb-2 mr-sm-2 mb-sm-0">
													<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
												</label>
											</div>
											<div style="line-height: 5px; margin: 0px;">
												&nbsp;
											</div>
											<div class="col-md-12 text-center">
											<button class="btn  btn-blue col-md-5" id="previous3" role="button" type="button" onclick="change(this.id)">
												<i fa fa-right-arrow></i>上一步
											</button>
											<span class="col-md-1"></span>
											<button class="btn btn-blue col-md-5" id="next4" role="button" type="button" onclick="change(this.id)" disabled>
												<i fa fa-right-arrow></i>下一步
											</button>
											</div>
										</div> -->
									<!-- <div id="show5" >
											<div class="form-group">
												<label for="unamech">单位地址信息：</label>
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="czipcode" name='czipcode' placeholder="单位邮编">
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="addressch" name='addressch' placeholder="地址中文">
											</div>
											<div class="form-group">
												<input type="text" class="form-control" id="addressen" name='addressen' placeholder="地址英文">
											</div>
											<div class="form-check">
												<label class=" mb-2 mr-sm-2 mb-sm-0">
													<span class="custom-control-description">已有账户？<a href="/login/">返回登录</a></span>
												</label>
											</div>
											<div style="line-height: 5px; margin: 0px;">
												&nbsp;
											</div>
											<div class="col-md-12 text-center">
											<button class="btn  btn-blue col-md-5" id="previous4" role="button" type="button" onclick="change(this.id)">
												<i fa fa-right-arrow></i>上一步
											</button>
											<span class="col-md-1"></span>
											<button class="btn btn-blue col-md-5" id='sub_form'  role="button" type="submit">
												<i fa fa-right-arrow></i>提&nbsp;&nbsp;&nbsp;&nbsp;交
											</button>
											</div>
										</div> -->
                  </form>
              </div>
            </div>
          </div>
        </div>
      </section>

    <!--Global Javascript -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/tether.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
	<!-- <script src='/static/js/regist.js'></script> -->
	<script src="/static/js/mail.js"></script>
	<!-- <script>
		function change($id){
			if($id=='next1')
				deal(1)
			if($id=='next2')
				deal(2)
			if($id=='next3')
				deal(3)
			if($id=='next4')
				deal(4)
			if($id=='previous1')
				deal(0)
			if($id=='previous2')
				deal(1)
			if($id=='previous3')
				deal(2)
			if($id=='previous4')
				deal(3)
		}
		function deal($deal){
			for(i=0;i<5;i++){
				$("#show"+(i+1)+"").hide()
			}
			$("#show"+($deal+1)+"").show()
		}
		$('#uaccount').bind("input propertychange", function(){
			cnext1()
			sub();
		});
		$('#upassword').bind("input propertychange", function(){
			cnext1()
			sub();
		});
		$('#enupassword').bind("input propertychange", function(){
			cnext1()
			sub();
		});
		function cnext1(){
			a = $('#uaccount').val()
			b = $('#upassword').val()
			c = $('#enupassword').val()
			if( a.length>5 && b.length>5 && b==c)
			{
				$('#next1').removeAttr('disabled');
			}
			else{
				$('#next1').attr("disabled",'disabled');
			}
		}

		$('#umail').bind("input propertychange", function(){
			cnext2()
			sub();

		});
		$('#uphone').bind("input propertychange", function(){
			cnext2()
			sub();

		});
		$('#uqq').bind("input propertychange", function(){
			cnext2()
			sub();
		});
		$('#uwechat').bind("input propertychange", function(){
			cnext2()
			sub();
		});
		function cnext2(){
			a = $('#uphone').val()
			b = $('#uqq').val()
			c = $('#uwechat').val()
			d = $('#umail').val()
			if( a.length==11 && b.length>4 && c.length>3 && d.length>5)
			{
				$('#next2').removeAttr('disabled');
			}
			else{
				$('#next2').attr("disabled",'disabled');
			}
		}

		$('#unamech').bind("input propertychange", function(){
			cnext3()
			sub();
		});
		$('#unameen').bind("input propertychange", function(){
			cnext3()
			sub();
		});
		function cnext3(){
			a = $('#unamech').val()
			b = $('#unameen').val()
			if( a.length>0 && b.length>0)
			{
				$('#next3').removeAttr('disabled');
			}
			else{
				$('#next3').attr("disabled",'disabled');
			}
		}

		$('#cnamech1').bind("input propertychange", function(){
			cnext4()
			sub();
		});
		$('#cnameeg1').bind("input propertychange", function(){
			cnext4()
			sub();
		});
		$('#cnamech2').bind("input propertychange", function(){
			cnext4()
			sub();
		});
		$('#cnameeg2').bind("input propertychange", function(){
			cnext4();
			sub();
		});
		function cnext4(){
			a = $('#cnamech1').val()
			b = $('#cnameeg1').val()
			c = $('#cnamech2').val()
			d = $('#cnameeg2').val()
			if( a.length>0 && b.length>0 && c.length>0 && d.length>0)
			{
				$('#next4').removeAttr('disabled');
			}
			else{
				$('#next4').attr("disabled",'disabled');
			}
		}
		$('#czipcode').bind("input propertychange", function(){
			sub();
		});
		$('#addressch').bind("input propertychange", function(){
			sub();
		});
		$('#addressen').bind("input propertychange", function(){
			sub();
		});
		function sub(){
			a1 = $('#uaccount').val()
			a2 = $('#upassword').val()
			a3 = $('#enupassword').val()
			a4 = $('#umail').val()
			a5 = $('#uphone').val()
			a6 = $('#uqq').val()
			a7 = $('#uwechat').val()
			a8 = $('#unamech').val()
			a9 = $('#unameen').val()
			a10 = $('#cnamech1').val()
			a11 = $('#cnameeg1').val()
			a12 = $('#cnamech2').val()
			a13 = $('#cnameeg2').val()
			a14 = $('#czipcode').val()
			a15 = $('#addressch').val()
			a16 = $('#addressen').val()
			if(a1.length>5 && a2.length>5 && a3==a2 && a4.length>5 &&a5.length==11 && a6.length>4 && a7.length>4 && a8.length>0&& a9.length>0&& a10.length>0&& a11.length>0&& a12.length>0&& a13.length>0&& a14.length>0&& a15.length>0&& a16.length>0)
			{
				$('#sub_form').removeAttr('disabled')
			}
			else{
				$('#sub_form').attr('disabled','disabled')
			}
		}
	</script> -->
		<script>
			var suc = new Array
			for(j=0;j<10;j++)
				suc[j]=false
			var c_username= /^[a-zA-Z]{1}([a-zA-Z0-9]|[_]){4,19}$//* 用户名格式 */
			var c_password= /^([a-zA-Z0-9]|[_]){6,20}$/ //密码是6-20位，不能有除_以外的特殊字符
			var c_umail = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/ //邮箱格式。
			var c_uphone = /^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\d{8}$/ //最新的手机格式
			var c_uqq = /^[1-9]\d{4,10}$/ //qq正则表达式
			var c_ufnamech=/^[赵|钱|孙|李|周|吴|郑|王|冯|陈|楮|卫|蒋|沈|韩|杨|朱|秦|尤|许|何|吕|施|张|孔|曹|严|华|金|魏|陶|姜|戚|谢|邹|喻|柏|水|窦|章|云|苏|潘|葛|奚|范|彭|郎|鲁|韦|昌|马|苗|凤|花|方|俞|任|袁|柳|酆|鲍|史|唐|费|廉|岑|薛|雷|贺|倪|汤|滕|殷|罗|毕|郝|邬|安|常|乐|于|时|傅|皮|卞|齐|康|伍|余|元|卜|顾|孟|平|黄|和|穆|萧|尹|姚|邵|湛|汪|祁|毛|禹|狄|米|贝|明|臧|计|伏|成|戴|谈|宋|茅|庞|熊|纪|舒|屈|项|祝|董|梁|杜|阮|蓝|闽|席|季|麻|强|贾|路|娄|危|江|童|颜|郭|梅|盛|林|刁|锺|徐|丘|骆|高|夏|蔡|田|樊|胡|凌|霍|虞|万|支|柯|昝|管|卢|莫|经|房|裘|缪|干|解|应|宗|丁|宣|贲|邓|郁|单|杭|洪|包|诸|左|石|崔|吉|钮|龚|程|嵇|邢|滑|裴|陆|荣|翁|荀|羊|於|惠|甄|麹|家|封|芮|羿|储|靳|汲|邴|糜|松|井|段|富|巫|乌|焦|巴|弓|牧|隗|山|谷|车|侯|宓|蓬|全|郗|班|仰|秋|仲|伊|宫|宁|仇|栾|暴|甘|斜|厉|戎|祖|武|符|刘|景|詹|束|龙|叶|幸|司|韶|郜|黎|蓟|薄|印|宿|白|怀|蒲|邰|从|鄂|索|咸|籍|赖|卓|蔺|屠|蒙|池|乔|阴|郁|胥|能|苍|双|闻|莘|党|翟|谭|贡|劳|逄|姬|申|扶|堵|冉|宰|郦|雍|郤|璩|桑|桂|濮|牛|寿|通|边|扈|燕|冀|郏|浦|尚|农|温|别|庄|晏|柴|瞿|阎|充|慕|连|茹|习|宦|艾|鱼|容|向|古|易|慎|戈|廖|庾|终|暨|居|衡|步|都|耿|满|弘|匡|国|文|寇|广|禄|阙|东|欧|殳|沃|利|蔚|越|夔|隆|师|巩|厍|聂|晁|勾|敖|融|冷|訾|辛|阚|那|简|饶|空|曾|毋|沙|乜|养|鞠|须|丰|巢|关|蒯|相|查|后|荆|红|游|竺|权|逑|盖|益|桓|公|仉|督|晋|楚|阎|法|汝|鄢|涂|钦|归|海|岳|帅|缑|亢|况|后|有|琴|商|牟|佘|佴|伯|赏|墨|哈|谯|笪|年|爱|阳|佟|言|福]$/
			var c_ufnamech1=/^[欧阳|太史|端木|上官|司马|东方|独孤|南宫|万俟|闻人|夏侯|诸葛|尉迟|公羊|赫连|澹台|皇甫|宗政|濮阳|公冶|太叔|申屠|公孙|慕容|仲孙|钟离|长孙|宇文|司徒|鲜于|司空|闾丘|子车|亓官|司寇|巫马|公西|颛孙|壤驷|公良|漆雕|乐正|宰父|谷梁|拓跋|夹谷|轩辕|令狐|段干|百里|呼延|东郭|南门|羊舌|微生|公户|公玉|公仪|梁丘|公仲|公上|公门|公山|公坚|左丘|公伯|西门|公祖|第五|公乘|贯丘|公皙|南荣|东里|东宫|仲长|子书|子桑|即墨|达奚|褚师].$/
			//以上两个是单姓和复姓。
			var c_ulnamech=/^[\u4e00-\u9fa5]+$/ //汉字正则
			var c_ulfnameen=/^[a-zA-Z]+$/ //英语正则
			//---------------------------以下为用户名验证----------------------------
			/*$("#username").blur(function () {
				$.ajax({
					type : 'POST',
					url : "/check/",
					dataType : 'json',
					data:{
						'deal_type': $(this).attr('id'),
						'deal_name': $('#username').val()
					},
					success: function(ret){
						show_warning(ret.message)
						if(ret.message=='')
							suc[0]=true
						else
							suc[0]=false
					}
				});
			});*/
			$('#username').bind("input propertychange",function(){
				username = $('#username').val()
				if(username.length>4&&username.length<21)
				{
					if(!c_username.exec(username))
					{
						show_warning('用户名以字母开头，其余为字母、数字和_')
						suc[0]=false
					}
					else
					{
						show_warning('')
						$.ajax({
							type : 'POST',
							url : "/check/",
							dataType : 'json',
							data:{
								'deal_type': $(this).attr('id'),
								'deal_name': $('#username').val()
							},
							success: function(ret){
								show_warning(ret.message)
								if(ret.message=='')
									suc[0]=true
								else
									suc[0]=false
							}
						});
					}
				}
				else
				{
					show_warning('用户名必须为5—20位之间')
					suc[0]=false
				}
			});
			//-----------------------------以上为用户名验证-------------------------------
			
			//-----------------------------以下为密码验证-------------------------------
			$('#upassword').bind("input propertychange",function(){
				pwd = $(this).val()
				enpwd = $('#enupassword').val()
				if(enpwd=='')
				{	
					if(!c_password.exec(pwd))
					{
						show_warning('密码长度为6位，只包含字母、数字及_')
						suc[1]=false
					}	
					else
					{
						show_warning('')
						suc[1]=true
					}
				}
				if(enpwd != '')
				{
					if(!c_password.exec(pwd))
					{
						show_warning('密码长度为6位，只包含字母、数字及_')
						suc[1]=false
					}	
					else
					{
						suc[1]=true
						if(enpwd==pwd)
						{
							show_warning('')
							suc[2]=true
						}
						else
						{
							show_warning('两次密码不一致')
							suc[2]=false
						}
					}
				}
			});
			$('#enupassword').bind("input propertychange",function(){
				pwd = $('#upassword').val()
				enpwd = $('#enupassword').val()
				if(enpwd=='')
				{	
					if(!c_password.exec(pwd))
					{
						show_warning('密码长度为6位，只包含字母、数字及_')
						suc[1]=false
					}	
					else
					{
						show_warning('')
						suc[1]=true
					}
				}
				if(enpwd != '')
				{
					if(!c_password.exec(pwd))
					{
						show_warning('密码长度为6位，只包含字母、数字及_')
						suc[1]=false
					}	
					else
					{
						suc[1]=true
						if(enpwd==pwd)
						{
							show_warning('')
							suc[2]=true
						}
						else
						{
							show_warning('两次密码不一致')
							suc[2]=false
						}
					}
				}
			});
			//-----------------------------以上为密码验证-------------------------------
			
			//-----------------------------第一页翻页-------------------------------
			$('#next1').click(function(){
				var i =0
				for(i=0;i<3;i++){
					if(suc[i]==false){
						if(i==0) 
						{
							show_warning('请检查用户名')
							$('#username').focus()
							break;
						}
						if(i==1) 
						{
							show_warning('请检查密码是否符合格式')
							$('#upassword').focus()
							break;
						}
						if(i==2) 
						{
							show_warning('两次密码不一致')
							$('#enupassword').focus()
							break;
						}
					}
				}
				if(i==3)
				{
					$('#show1').addClass('message_hidden')
					$('#show2').removeClass('message_hidden')
				}
			})
			//-----------------------------第一页翻页-------------------------------
			//-----------------------------回到第一页-------------------------------
			$('#previous1').click(function(){
				$('#show1').removeClass('message_hidden')
				$('#show2').addClass('message_hidden')
			});
			//-----------------------------回到第一页-------------------------------
			//-----------------------------中文名格式-------------------------------
			$('#ufnamech').bind("input propertychange",function(){
				ufnamech = $(this).val()//姓氏判别
				if (ufnamech.length<2)
				{
					if(!c_ufnamech.exec(ufnamech))
					{
						show_warning('请输入正确的姓氏')
						suc[3]=false
					}
					else
					{
						show_warning('')
						suc[3]=true
					}
				}
				else
				{
					if(!c_ufnamech1.exec(ufnamech))
					{
						show_warning('请输入正确的姓氏')
						suc[3]=false
					}
				else
					{
						show_warning('')
						suc[3]=true
					}
				}
			});
			$('#ulnamech').bind("input propertychange",function(){
				ulnamech = $(this).val()
				if(!c_ulnamech.exec(ulnamech))
				{
					show_warning('请输入正确的名字')
					suc[4]=false
				}
				else
				{
					show_warning('')
					suc[4]=true
				}
			});
			//-----------------------------中文名格式-------------------------------
			//-----------------------------英文名格式-------------------------------
			$('#ufnameen').bind("input propertychange",function(){
				ufnameen = $(this).val()
				first = ufnameen.substring(0, 1).toUpperCase()
				final = ufnameen.substring(1, ufnameen.length).toLowerCase()
				ufnameen = first+final
				if(!c_ulfnameen.exec(ufnameen))
				{
					show_warning('Illegal Firstname (英文名不合法)')
					suc[5]=false
				}
				else
				{
					show_warning('')
					suc[5]=true
				}
			});
			$('#ulnameen').bind("input propertychange",function(){
				ulnameen = $(this).val()
				first = ulnameen.substring(0, 1).toUpperCase()
				final = ulnameen.substring(1, ulnameen.length).toLowerCase()
				ulnameen = first+final
				if(!c_ulfnameen.exec(ulnameen))
				{
					show_warning('Illegal Lastname (英文姓不合法)')
					suc[6]=false
				}
				else
				{
					show_warning('')
					suc[6]=true
				}
			});
			//-----------------------------英文名格式-------------------------------
			
			//-----------------------------next2下一步合法检验-------------------------------
			$('#next2').click(function(){
				for(i=3;i<7;i++)
				{
					if(suc[i]==false)
					{
						if(i==3)
						{
							show_warning('请输入正确的姓氏')
							break
						}
						if(i==4)
						{
							show_warning('请输入正确的名字')
							break
						}
						if(i==5)
						{
							show_warning('Illegal Firstname (英文名不合法)')
							break
						}
						if(i==6)
						{
							show_warning('Illegal Lastname (英文姓不合法)')
							break
						}
					}
				}
				if(i==7)
				{
					$('#show2').addClass('message_hidden')
					$('#show3').removeClass('message_hidden')
				}
			})
			//-----------------------------next2下一步合法检验-------------------------------
			
			//-----------------------------previous2下一步合法检验-------------------------------
			$('#previous2').click(function(){
				$('#show2').removeClass('message_hidden')
				$('#show3').addClass('message_hidden')
			})
			//-----------------------------previous2下一步合法检验-------------------------------

			//-----------------------------邮箱格式-------------------------------
			function deal_mail(umail){
				if(!c_umail.exec(umail))
				{
					show_warning('邮箱格式不正确')
					suc[7]=false//若邮箱不符合正则，为假
				}
				else
				{
					$.ajax({
						type : 'POST',
						url : "/check/",
						dataType : 'json',
						data:{
							'deal_type': $('#umail').attr('id'),
							'deal_name': umail
						},
						success: function(ret){
							show_warning(ret.message)
							if(ret.message=='')
								suc[7]=true//若数据库没有为真
							else
								suc[7]=false//若数据库有为假
						}
					});
				}
			}
			$('#umail').bind("input propertychange",function(){
				umail = $(this).val()
				deal_mail(umail)//input内容改变触发
			});
			$('#show_mail').click(function(){
				umail = $('#umail').val()
				deal_mail(umail)//点击下拉列表触发
			});
			//-----------------------------邮箱格式-------------------------------
			//-----------------------------手机格式-------------------------------
			$('#uphone').bind("input propertychange",function(){
				uphone = $(this).val()
				if(!c_uphone.exec(uphone))
				{
					show_warning('手机格式不正确')
					suc[8]=false
				}
				else
				{
					$.ajax({
						type : 'POST',
						url : "/check/",
						dataType : 'json',
						data:{
							'deal_type': $('#uphone').attr('id'),
							'deal_name': uphone
						},
						success: function(ret){
							show_warning(ret.message)
							if(ret.message=='')
								suc[8]=true//若数据库没有为真
							else
								suc[8]=false//若数据库有为假
						}
					});
				}
			});
			//-----------------------------手机格式-------------------------------
			//-----------------------------qq格式以及判别-------------------------------
			$('#uqq').bind("input propertychange",function(){
				uqq = $(this).val()
				if(!c_uqq.exec(uqq))
				{
					show_warning('qq格式不正确')
					suc[9]=false
				}
				else
				{
					$.ajax({
						type : 'POST',
						url : "/check/",
						dataType : 'json',
						data:{
							'deal_type': $('#uqq').attr('id'),
							'deal_name': uqq
						},
						success: function(ret){
							show_warning(ret.message)
							if(ret.message=='')
								suc[9]=true//若数据库没有为真
							else
								suc[9]=false//若数据库有为假
						}
					});
				}
			});
			//-----------------------------qq格式以及判别-------------------------------
			


			//-----------------------------提交检测-------------------------------
			function checkall(){
				for(i=7;i<10;i++)
				{
					if(suc[i]==false)
					{
						if(i==7)
						{
							show_warning('邮箱不满足条件')
							$('#umail').focus()
							return false
						}
						if(i==8)
						{
							show_warning('手机号不满足条件')
							$('#uphone').focus()
							return false
						}
						if(i==9)
						{
							show_warning('qq号不满足条件')
							$('#uqq').focus()
							return false
						}
					}
				}
				if(i==10)
					return true
			}
			//-----------------------------提交检测-------------------------------
			function show_warning(deal){
				$action = $('#message')
				if(deal != '')
				{
					$action.removeClass('message_hidden')
					$action.html(deal)
				}
				else
				$action.addClass('message_hidden')
			}
		</script>
</body>

</html>